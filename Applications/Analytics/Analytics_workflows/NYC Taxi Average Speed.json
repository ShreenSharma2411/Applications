{"name":"NYC Taxi Average Speed","uuid":"3a19b31b-3d9e-4ddc-8845-cf5bce97d13b","category":"Taxi Speed","description":"Average speed of taxis at each hour in NYC","parameters":"-","nodes":[{"id":"1","name":"Read in NYC Trip Data","description":"This Node creates a DataFrame by reading data from HDFS, HIVE etc. The dataset has been defined earlier in Fire by using the Dataset Feature. As a user, you just have to select the Dataset of your interest.","details":"This Node creates a DataFrame by reading data from HDFS, HIVE etc.\u003cbr\u003e\n\u003cbr\u003e\nThe data has been defined earlier in Fire by using the Dataset Feature. As a user, you just have to select the Dataset of your interest.\u003cbr\u003e","examples":"","type":"dataset","nodeClass":"fire.nodes.dataset.NodeDatasetStructured","x":"45.9444px","y":"246.583px","fields":[{"name":"storageLevel","value":"DEFAULT","widget":"array","title":"Output Storage Level","description":"Storage Level of the Output Datasets of this Node","optionsArray":["DEFAULT","NONE","DISK_ONLY","DISK_ONLY_2","MEMORY_ONLY","MEMORY_ONLY_2","MEMORY_ONLY_SER","MEMORY_ONLY_SER_2","MEMORY_AND_DISK","MEMORY_AND_DISK_2","MEMORY_AND_DISK_SER","MEMORY_AND_DISK_SER_2","OFF_HEAP"],"required":false,"display":true,"editable":true,"disableRefresh":false},{"name":"dataset","value":"452e77f9-2d70-4c2b-8673-41dd2e9aa668","widget":"dataset","title":"Dataset","description":"Selected Dataset","required":true,"display":true,"editable":true,"disableRefresh":false}],"engine":"scala"},{"id":"8","name":"Calculate the speed per hour","description":"This node runs the given SQL on the incoming DataFrame","details":"","examples":"","type":"transform","nodeClass":"fire.nodes.etl.NodeSQL","x":"481.93px","y":"247.602px","fields":[{"name":"storageLevel","value":"DEFAULT","widget":"array","title":"Output Storage Level","description":"Storage Level of the Output Datasets of this Node","optionsArray":["DEFAULT","NONE","DISK_ONLY","DISK_ONLY_2","MEMORY_ONLY","MEMORY_ONLY_2","MEMORY_ONLY_SER","MEMORY_ONLY_SER_2","MEMORY_AND_DISK","MEMORY_AND_DISK_2","MEMORY_AND_DISK_SER","MEMORY_AND_DISK_SER_2","OFF_HEAP"],"required":false,"display":true,"editable":true,"disableRefresh":false},{"name":"tempTable","value":"temptable","widget":"textfield","title":"Temp Table","description":"Temp Table Name to be used","required":false,"display":true,"editable":true,"disableRefresh":false},{"name":"sql","value":"select temptable.medallion , temptable.pickup_datetime_hour, \n\ncase when (temptable.trip_time_in_secs \u003d 0 or temptable.trip_distance \u003d 0.0) then 0.0 else (temptable.trip_distance*60*60)/temptable.trip_time_in_secs end \nas speed from temptable","widget":"textarea_medium","title":"SQL","description":"SQL to be run","required":false,"display":true,"editable":true,"disableRefresh":false},{"name":"schema","value":"","widget":"tab","title":"Schema","required":false,"display":true,"editable":true,"disableRefresh":false},{"name":"outputColNames","value":"[\"medallion\",\"pickup_datetime_hour\",\"speed\"]","widget":"schema_col_names","title":"Output Column Names","description":"Name of the Output Columns","required":false,"display":true,"editable":true,"disableRefresh":false},{"name":"outputColTypes","value":"[\"STRING\",\"INTEGER\",\"DOUBLE\"]","widget":"schema_col_types","title":"Output Column Types","description":"Data Type of the Output Columns","required":false,"display":true,"editable":true,"disableRefresh":false},{"name":"outputColFormats","value":"[\"\",\"\",\"\"]","widget":"schema_col_formats","title":"Output Column Formats","description":"Format of the Output Columns","required":false,"display":true,"editable":true,"disableRefresh":false}],"engine":"scala"},{"id":"10","name":"PrintNRows","description":"Prints the specified number of records in the DataFrame. It is useful for seeing intermediate output","details":"","examples":"","type":"transform","nodeClass":"fire.nodes.util.NodePrintFirstNRows","x":"901.938px","y":"144.583px","fields":[{"name":"storageLevel","value":"DEFAULT","widget":"array","title":"Output Storage Level","description":"Storage Level of the Output Datasets of this Node","optionsArray":["DEFAULT","NONE","DISK_ONLY","DISK_ONLY_2","MEMORY_ONLY","MEMORY_ONLY_2","MEMORY_ONLY_SER","MEMORY_ONLY_SER_2","MEMORY_AND_DISK","MEMORY_AND_DISK_2","MEMORY_AND_DISK_SER","MEMORY_AND_DISK_SER_2","OFF_HEAP"],"required":false,"display":true,"editable":true,"disableRefresh":false},{"name":"title","value":"Row Values","widget":"textfield","title":"Title","required":false,"display":true,"editable":true,"disableRefresh":false},{"name":"n","value":"24","widget":"textfield","title":"Num Rows to Print","description":"number of rows to be printed","required":false,"display":true,"editable":true,"disableRefresh":false}],"engine":"scala"},{"id":"11","name":"Extract hour from pickup time","description":"It creates a new DataFrame by extracting Date and Time fields.","details":"Extracts year, month, day of month, hour, minute, second and week of year in different columns.\u003cbr\u003e","examples":"","type":"transform","nodeClass":"fire.nodes.etl.NodeDateTimeFieldExtract","x":"260.938px","y":"243.562px","fields":[{"name":"storageLevel","value":"DEFAULT","widget":"array","title":"Output Storage Level","description":"Storage Level of the Output Datasets of this Node","optionsArray":["DEFAULT","NONE","DISK_ONLY","DISK_ONLY_2","MEMORY_ONLY","MEMORY_ONLY_2","MEMORY_ONLY_SER","MEMORY_ONLY_SER_2","MEMORY_AND_DISK","MEMORY_AND_DISK_2","MEMORY_AND_DISK_SER","MEMORY_AND_DISK_SER_2","OFF_HEAP"],"required":false,"display":true,"editable":true,"disableRefresh":false},{"name":"inputCol","value":"pickup_datetime","widget":"variable","title":"Column","description":"The input column name","datatypes":["date","timestamp"],"required":false,"display":true,"editable":true,"disableRefresh":false},{"name":"extractYear","value":"false","widget":"array","title":"Extract Year","description":"Extract Year","datatypes":["boolean"],"optionsArray":["true","false"],"required":false,"display":true,"editable":true,"disableRefresh":false},{"name":"extractMonth","value":"false","widget":"array","title":"Extract Month","description":"Extract Month","datatypes":["boolean"],"optionsArray":["true","false"],"required":false,"display":true,"editable":true,"disableRefresh":false},{"name":"extractDayOfMonth","value":"false","widget":"array","title":"Extract Day of Month","description":"Extract Day of Month","datatypes":["boolean"],"optionsArray":["true","false"],"required":false,"display":true,"editable":true,"disableRefresh":false},{"name":"extractHour","value":"true","widget":"array","title":"Extract Hour","description":"Extract Hour","datatypes":["boolean"],"optionsArray":["true","false"],"required":false,"display":true,"editable":true,"disableRefresh":false},{"name":"extractMinute","value":"true","widget":"array","title":"Extract Minute","description":"Extract Minute","datatypes":["boolean"],"optionsArray":["true","false"],"required":false,"display":true,"editable":true,"disableRefresh":false},{"name":"extractSecond","value":"false","widget":"array","title":"Extract Second","description":"Extract Second","datatypes":["boolean"],"optionsArray":["true","false"],"required":false,"display":true,"editable":true,"disableRefresh":false},{"name":"extractWeekOfYear","value":"false","widget":"array","title":"Extract WeekOfYear","description":"Extract WeekOfYear","datatypes":["boolean"],"optionsArray":["true","false"],"required":false,"display":true,"editable":true,"disableRefresh":false}],"engine":"scala"},{"id":"12","name":"Display average speed per hour on Chart","details":"","examples":"","type":"transform","nodeClass":"fire.nodes.graph.NodeGraphValues","x":"895.948px","y":"376.587px","fields":[{"name":"storageLevel","value":"DEFAULT","widget":"array","title":"Output Storage Level","description":"Storage Level of the Output Datasets of this Node","optionsArray":["DEFAULT","NONE","DISK_ONLY","DISK_ONLY_2","MEMORY_ONLY","MEMORY_ONLY_2","MEMORY_ONLY_SER","MEMORY_ONLY_SER_2","MEMORY_AND_DISK","MEMORY_AND_DISK_2","MEMORY_AND_DISK_SER","MEMORY_AND_DISK_SER_2","OFF_HEAP"],"required":false,"display":true,"editable":true,"disableRefresh":false},{"name":"title","value":"Graph","widget":"textfield","title":"Title","required":false,"display":true,"editable":true,"disableRefresh":false},{"name":"xlabel","value":"Hour","widget":"textfield","title":"X Label","required":false,"display":true,"editable":true,"disableRefresh":false},{"name":"ylabel","value":"Avg Speed","widget":"textfield","title":"Y Label","required":false,"display":true,"editable":true,"disableRefresh":false},{"name":"graphType","value":"LINECHART","widget":"enum","title":"Chart Type","optionsMap":{"LINECHART":"Line Chart","COLUMNCHART":"Side by Side Bar Chart","BARCHART":"Stacked Bar Chart","PIE":"Pie Chart"},"required":false,"display":true,"editable":true,"disableRefresh":false},{"name":"isStreaming","value":"false","widget":"array","title":"Is Streaming?","description":"Whether the Graph is a Streaming Graph or not","datatypes":["boolean"],"optionsArray":["true","false"],"required":false,"display":true,"editable":true,"disableRefresh":false},{"name":"xCol","value":"pickup_datetime_hour","widget":"variable","title":"X Column","required":false,"display":true,"editable":true,"disableRefresh":false},{"name":"yCols","value":"[\"avg_speed\"]","widget":"variables","title":"Y Columns","datatypes":["integer","long","double","float"],"required":false,"display":true,"editable":true,"disableRefresh":false}],"engine":"scala"},{"id":"13","name":"Documentation","description":"Allows capturing Notes on the Workflow","details":"","examples":"","type":"doc","nodeClass":"fire.nodes.doc.NodeDocLarge","x":"49.9826px","y":"33.6285px","fields":[{"name":"storageLevel","value":"DEFAULT","widget":"array","title":"Output Storage Level","description":"Storage Level of the Output Datasets of this Node","optionsArray":["DEFAULT","NONE","DISK_ONLY","DISK_ONLY_2","MEMORY_ONLY","MEMORY_ONLY_2","MEMORY_ONLY_SER","MEMORY_ONLY_SER_2","MEMORY_AND_DISK","MEMORY_AND_DISK_2","MEMORY_AND_DISK_SER","MEMORY_AND_DISK_SER_2","OFF_HEAP"],"required":false,"display":true,"editable":true,"disableRefresh":false},{"name":"comment","value":"\u003ch1\u003eAverage Speed of taxi per hour in NYC\u003c/h1\u003e\u003cp\u003e\u003cbr\u003e\u003c/p\u003e\u003cp\u003eThis workflow calculates the average speed of taxis in NYC for each hour.\u003c/p\u003e\u003cp\u003e\u003cbr\u003e\u003c/p\u003e\u003ch2\u003eThis workflow does the following steps\u003c/h2\u003e\u003cp\u003e\u003cbr\u003e\u003c/p\u003e\u003cul\u003e\u003cli\u003eExtract the hour and minute fields from pickup field of type timestamp.\u003c/li\u003e\u003cli\u003eBy selecting only required fields calculate speed field by using total distance traveled and travel time.\u003c/li\u003e\u003cli\u003eBy pickup hour field calculate the average speed of each hour.\u003c/li\u003e\u003cli\u003eVisualize the analysis by using GraphValues node.\u0026nbsp;\u003c/li\u003e\u003c/ul\u003e","widget":"textarea_rich","title":"Comment","description":"Comments for the Workflow","required":false,"display":true,"editable":true,"disableRefresh":false}],"engine":"scala"},{"id":"14","name":"Calculate average speed per hour","description":"Grouper Node","details":"","examples":"","type":"transform","nodeClass":"fire.nodes.etl.NodeGroupBy","x":"693.934px","y":"260.934px","fields":[{"name":"storageLevel","value":"DEFAULT","widget":"array","title":"Output Storage Level","description":"Storage Level of the Output Datasets of this Node","optionsArray":["DEFAULT","NONE","DISK_ONLY","DISK_ONLY_2","MEMORY_ONLY","MEMORY_ONLY_2","MEMORY_ONLY_SER","MEMORY_ONLY_SER_2","MEMORY_AND_DISK","MEMORY_AND_DISK_2","MEMORY_AND_DISK_SER","MEMORY_AND_DISK_SER_2","OFF_HEAP"],"required":false,"display":true,"editable":true,"disableRefresh":false},{"name":"groupingCols","value":"[\"pickup_datetime_hour\"]","widget":"variables","title":"Grouping Columns","description":"Grouping Columns","required":false,"display":true,"editable":true,"disableRefresh":false},{"name":"aggregateCols","value":"[\"speed\"]","widget":"variables_list_select","title":"Aggregate Columns","description":"Aggregate Columns","required":false,"display":true,"editable":true,"disableRefresh":false},{"name":"aggregateOperations","value":"[\"avg\"]","widget":"variables_list_array","title":"Aggregate Operation to use","description":"Aggregate Operation","optionsArray":["sum","avg","min","max","count"],"required":false,"display":true,"editable":true,"disableRefresh":false},{"name":"havingClause","value":"","widget":"textarea_small","title":"Having Clause","description":"having condition after group by function","required":false,"display":true,"editable":true,"disableRefresh":false},{"name":"whereClause","value":"pickup_datetime_hour is not null OR speed is not null","widget":"textarea_small","title":"Where Clause","description":"where condition before group by function","required":false,"display":true,"editable":true,"disableRefresh":false}],"engine":"scala"}],"edges":[{"source":"1","target":"11","id":1},{"source":"11","target":"8","id":2},{"source":"8","target":"14","id":3},{"source":"14","target":"10","id":4},{"source":"14","target":"12","id":5}],"dataSetDetails":[{"id":24,"uuid":"452e77f9-2d70-4c2b-8673-41dd2e9aa668","header":true,"path":"data/trips-subset.csv","delimiter":",","datasetType":"CSV","filterLinesContaining":"passenger_count","datasetSchema":"{\"colNames\":[\"medallion\",\"hack_license\",\"vendor_id\",\"rate_code\",\"store_and_fwd_flag\",\"pickup_datetime\",\"dropoff_datetime\",\"passenger_count\",\"trip_time_in_secs\",\"trip_distance\",\"pickup_longitude\",\"pickup_latitude\",\"dropoff_longitude\",\"dropoff_latitude\"],\"colTypes\":[\"STRING\",\"STRING\",\"STRING\",\"INTEGER\",\"STRING\",\"TIMESTAMP\",\"TIMESTAMP\",\"INTEGER\",\"INTEGER\",\"DOUBLE\",\"DOUBLE\",\"DOUBLE\",\"DOUBLE\",\"DOUBLE\"],\"colFormats\":[\"\",\"\",\"\",\"\",\"\",\"dd/MM/yyyy HH:mm\",\"dd/MM/yyyy HH:mm\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],\"colMLTypes\":[\"TEXT\",\"TEXT\",\"TEXT\",\"NUMERIC\",\"TEXT\",\"TEXT\",\"TEXT\",\"NUMERIC\",\"NUMERIC\",\"NUMERIC\",\"NUMERIC\",\"NUMERIC\",\"NUMERIC\",\"NUMERIC\"]}"}],"engine":"scala"}