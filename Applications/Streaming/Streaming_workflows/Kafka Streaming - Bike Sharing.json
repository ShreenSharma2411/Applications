{"name":"Kafka Streaming - Bike Sharing","uuid":"0323baae-4656-4e3e-b26c-1d1776663004","category":"Bike Sharing Analytics","description":"Graph Number of Bikes Rented per hour","nodes":[{"id":"1","name":"Streaming Kafka","description":"Reads in streaming text from topics in Apache Kafka","details":"","examples":"","type":"sparkstreaming","nodeClass":"fire.nodes.streaming.NodeStreamingKafka","x":"19.4271px","y":"187.573px","fields":[{"name":"storageLevel","value":"DEFAULT","widget":"array","title":"Output Storage Level","description":"Storage Level of the Output Datasets of this Node","optionsArray":["DEFAULT","NONE","DISK_ONLY","DISK_ONLY_2","MEMORY_ONLY","MEMORY_ONLY_2","MEMORY_ONLY_SER","MEMORY_ONLY_SER_2","MEMORY_AND_DISK","MEMORY_AND_DISK_2","MEMORY_AND_DISK_SER","MEMORY_AND_DISK_SER_2","OFF_HEAP"],"required":false,"display":true,"editable":true,"disableRefresh":false},{"name":"batchDuration","value":"30","widget":"textfield","title":"Batch Duration in Seconds","description":"Batch Duration in Seconds","required":false,"display":true,"editable":true,"disableRefresh":false},{"name":"brokers","value":"localhost:9092","widget":"textfield","title":"Kafka Brokers","description":"Kafka Brokers","required":false,"display":true,"editable":true,"disableRefresh":false},{"name":"group","value":"21","widget":"textfield","title":"Consumer Group","description":"Consumer Group","required":false,"display":true,"editable":true,"disableRefresh":false},{"name":"topics","value":"bike-sharing","widget":"textfield","title":"Kafka Topics","description":"List of Topics separated by , (comma)","required":false,"display":true,"editable":true,"disableRefresh":false},{"name":"autoOffsetReset","value":"latest","widget":"textfield","title":"auto.offset.reset","description":"Auto Offset Reset","required":false,"display":true,"editable":true,"disableRefresh":false},{"name":"enableAutoCommit","value":"true","widget":"textfield","title":"enable.auto.commit","description":"Enable Auto Commit","required":false,"display":true,"editable":true,"disableRefresh":false},{"name":"kafkaParamsKeys","value":"[]","widget":"key_array","title":"Params Key/Value Pairs","description":"More Config Values","required":false,"display":true,"editable":true,"disableRefresh":false},{"name":"kafkaParamsValues","value":"[]","widget":"value_array","title":"Parms Key/Value Pairs","description":"More Config Values","required":false,"display":true,"editable":true,"disableRefresh":false}],"engine":"scala"},{"id":"2","name":"PrintNRows","description":"Prints the specified number of records in the DataFrame. It is useful for seeing intermediate output","details":"","examples":"","type":"transform","nodeClass":"fire.nodes.util.NodePrintFirstNRows","x":"995.094px","y":"172.552px","fields":[{"name":"storageLevel","value":"DEFAULT","widget":"array","title":"Output Storage Level","description":"Storage Level of the Output Datasets of this Node","optionsArray":["DEFAULT","NONE","DISK_ONLY","DISK_ONLY_2","MEMORY_ONLY","MEMORY_ONLY_2","MEMORY_ONLY_SER","MEMORY_ONLY_SER_2","MEMORY_AND_DISK","MEMORY_AND_DISK_2","MEMORY_AND_DISK_SER","MEMORY_AND_DISK_SER_2","OFF_HEAP"],"required":false,"display":true,"editable":true,"disableRefresh":false},{"name":"title","value":"Row Values","widget":"textfield","title":"Title","required":false,"display":true,"editable":true,"disableRefresh":false},{"name":"n","value":"10","widget":"textfield","title":"Num Rows to Print","description":"number of rows to be printed","required":false,"display":true,"editable":true,"disableRefresh":false}],"engine":"scala"},{"id":"3","name":"Notes","description":"Allows capturing Notes on the Workflow","details":"","examples":"","type":"doc","nodeClass":"fire.nodes.doc.NodeDocLarge","x":"25.3194px","y":"26.2986px","fields":[{"name":"storageLevel","value":"DEFAULT","widget":"array","title":"Output Storage Level","description":"Storage Level of the Output Datasets of this Node","optionsArray":["DEFAULT","NONE","DISK_ONLY","DISK_ONLY_2","MEMORY_ONLY","MEMORY_ONLY_2","MEMORY_ONLY_SER","MEMORY_ONLY_SER_2","MEMORY_AND_DISK","MEMORY_AND_DISK_2","MEMORY_AND_DISK_SER","MEMORY_AND_DISK_SER_2","OFF_HEAP"],"required":false,"display":true,"editable":true,"disableRefresh":false},{"name":"comment","value":"\u003ch2\u003eKafka Streaming Workflow\u003c/h2\u003e\u003cp\u003e\u003cbr\u003e\u003c/p\u003e\u003cp\u003eThis workflow reads in events from the Kafka topic \u0027\u003cstrong\u003ebike_sharing\u003c/strong\u003e\u0027\u003c/p\u003e\u003cul\u003e\u003cli\u003eCalculates the number of bikes rented on an hourly basis.\u003c/li\u003e\u003cli\u003eDisplays the results on a Graph\u003c/li\u003e\u003c/ul\u003e\u003cp\u003e\u003cbr\u003e\u003c/p\u003e\u003ch3\u003e\u003cstrong\u003eStart Kafka and create Topic \u0027bike-sharing\u0027\u003c/strong\u003e\u003c/h3\u003e\u003cp\u003e\u003cbr\u003e\u003c/p\u003e\u003cul\u003e\u003cli\u003eâ€‹The quick start guide of Kafka is at :\u0026nbsp;\u003cstrong\u003ehttps://kafka.apache.org/quickstart\u003c/strong\u003e\u003c/li\u003e\u003cli class\u003d\"ql-indent-1\"\u003eCreate the topic \u0027\u003cstrong\u003ebike-sharing\u003c/strong\u003e\u0027 in Kafka\u003c/li\u003e\u003cli class\u003d\"ql-indent-2\"\u003e\u003cstrong\u003ekafka-topics.sh --create --zookeeper localhost:2181 --replication-factor 1 --partitions 1 --topic bike-sharing\u003c/strong\u003e\u003c/li\u003e\u003c/ul\u003e\u003cp\u003e\u003cbr\u003e\u003c/p\u003e\u003ch3\u003e\u003cstrong\u003eSend the data file \u0027bike_sharing_noheader.csv\u0027 to the Kafka Topic \u0027bike-sharing\u0027\u003c/strong\u003e\u003c/h3\u003e\u003cp\u003e\u003cbr\u003e\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003cstrong\u003ebike_sharing_noheader.csv\u003c/strong\u003e is in the data directory of the Fire Install\u003c/li\u003e\u003cli\u003e\u003cstrong\u003ecat bike_sharing_noheader.csv | kafka-console-producer.sh --broker-list localhost:9092 --topic bike-sharing (assuming the Kafka broker is running at localhost:9092)\u003c/strong\u003e\u003c/li\u003e\u003c/ul\u003e\u003cp\u003e\u003cbr\u003e\u003c/p\u003e\u003ch3\u003e\u003cstrong\u003eRun the workflows on the Spark Cluster\u003c/strong\u003e\u003c/h3\u003e\u003cp\u003e\u003cbr\u003e\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003cstrong\u003eThis would start a spark streaming job on the Spark Cluster\u003c/strong\u003e\u003c/li\u003e\u003cli\u003e\u003cstrong\u003eYou can keep pushing the data file to the Kafka topic for processing\u003c/strong\u003e\u003c/li\u003e\u003c/ul\u003e","widget":"textarea_rich","title":"Comment","description":"Comments for the Workflow","required":false,"display":true,"editable":true,"disableRefresh":false}],"engine":"scala"},{"id":"4","name":"FieldSplitter","description":"This node splits the string of the specified input column using the specified delimiter","details":"","examples":"","type":"transform","nodeClass":"fire.nodes.etl.NodeFieldSplitter","x":"226.049px","y":"184.333px","fields":[{"name":"storageLevel","value":"DEFAULT","widget":"array","title":"Output Storage Level","description":"Storage Level of the Output Datasets of this Node","optionsArray":["DEFAULT","NONE","DISK_ONLY","DISK_ONLY_2","MEMORY_ONLY","MEMORY_ONLY_2","MEMORY_ONLY_SER","MEMORY_ONLY_SER_2","MEMORY_AND_DISK","MEMORY_AND_DISK_2","MEMORY_AND_DISK_SER","MEMORY_AND_DISK_SER_2","OFF_HEAP"],"required":false,"display":true,"editable":true,"disableRefresh":false},{"name":"inputCol","value":"line","widget":"variable","title":"Input Column","description":"input column name","datatypes":["string"],"required":false,"display":true,"editable":true,"disableRefresh":false},{"name":"outputCols","value":"datetime,season,holiday,workingday,weather,temp,atemp,humidity,windspeed,casual,registered,count","widget":"textarea_medium","title":"Output Columns","description":"new column names separed by comma\u0027,\u0027.(eg: col1,co2,col3)","required":false,"display":true,"editable":true,"disableRefresh":false},{"name":"sep","value":",","widget":"textfield","title":"Separator","description":"separator to split the input column value(default: space)","required":false,"display":true,"editable":true,"disableRefresh":false},{"name":"onError","value":"die","widget":"array","title":"On Error","description":"","optionsArray":["die","ignore"],"required":false,"display":true,"editable":true,"disableRefresh":false}],"engine":"scala"},{"id":"5","name":"GraphGroupByColumn","details":"","examples":"","type":"transform","nodeClass":"fire.nodes.graph.NodeGraphGroupByColumn","x":"804.052px","y":"167.337px","fields":[{"name":"storageLevel","value":"DEFAULT","widget":"array","title":"Output Storage Level","description":"Storage Level of the Output Datasets of this Node","optionsArray":["DEFAULT","NONE","DISK_ONLY","DISK_ONLY_2","MEMORY_ONLY","MEMORY_ONLY_2","MEMORY_ONLY_SER","MEMORY_ONLY_SER_2","MEMORY_AND_DISK","MEMORY_AND_DISK_2","MEMORY_AND_DISK_SER","MEMORY_AND_DISK_SER_2","OFF_HEAP"],"required":false,"display":true,"editable":true,"disableRefresh":false},{"name":"title","value":"Graph Grouped by Column","widget":"textfield","title":"Title","required":false,"display":true,"editable":true,"disableRefresh":false},{"name":"xlabel","value":"X axis","widget":"textfield","title":"X Label","required":false,"display":true,"editable":true,"disableRefresh":false},{"name":"ylabel","value":"Y axis","widget":"textfield","title":"Y Label","required":false,"display":true,"editable":true,"disableRefresh":false},{"name":"groupByColumn","value":"datetime_dt_hour","widget":"variable","title":"Group By Column","required":false,"display":true,"editable":true,"disableRefresh":false},{"name":"graphType","value":"COLUMNCHART","widget":"enum","title":"Chart Type","optionsMap":{"COLUMNCHART":"Column Chart","BARCHART":"Bar Chart","LINECHART":"Line Chart","HISTOGRAM":"Histogram Chart"},"required":false,"display":true,"editable":true,"disableRefresh":false}],"engine":"scala"},{"id":"6","name":"DateTimeFieldExtract","description":"It creates a new DataFrame by extracting Date and Time fields.","details":"Extracts year, month, day of month, hour, minute, second and week of year in different columns.\u003cbr\u003e","examples":"","type":"transform","nodeClass":"fire.nodes.etl.NodeDateTimeFieldExtract","x":"618.747px","y":"178.993px","fields":[{"name":"storageLevel","value":"DEFAULT","widget":"array","title":"Output Storage Level","description":"Storage Level of the Output Datasets of this Node","optionsArray":["DEFAULT","NONE","DISK_ONLY","DISK_ONLY_2","MEMORY_ONLY","MEMORY_ONLY_2","MEMORY_ONLY_SER","MEMORY_ONLY_SER_2","MEMORY_AND_DISK","MEMORY_AND_DISK_2","MEMORY_AND_DISK_SER","MEMORY_AND_DISK_SER_2","OFF_HEAP"],"required":false,"display":true,"editable":true,"disableRefresh":false},{"name":"inputCol","value":"datetime_dt","widget":"variable","title":"Column","description":"The input column name","datatypes":["date","timestamp"],"required":false,"display":true,"editable":true,"disableRefresh":false},{"name":"extractYear","value":"true","widget":"array","title":"Extract Year","description":"Extract Year","datatypes":["boolean"],"optionsArray":["true","false"],"required":false,"display":true,"editable":true,"disableRefresh":false},{"name":"extractMonth","value":"true","widget":"array","title":"Extract Month","description":"Extract Month","datatypes":["boolean"],"optionsArray":["true","false"],"required":false,"display":true,"editable":true,"disableRefresh":false},{"name":"extractDayOfMonth","value":"true","widget":"array","title":"Extract Day of Month","description":"Extract Day of Month","datatypes":["boolean"],"optionsArray":["true","false"],"required":false,"display":true,"editable":true,"disableRefresh":false},{"name":"extractHour","value":"true","widget":"array","title":"Extract Hour","description":"Extract Hour","datatypes":["boolean"],"optionsArray":["true","false"],"required":false,"display":true,"editable":true,"disableRefresh":false},{"name":"extractMinute","value":"false","widget":"array","title":"Extract Minute","description":"Extract Minute","datatypes":["boolean"],"optionsArray":["true","false"],"required":false,"display":true,"editable":true,"disableRefresh":false},{"name":"extractSecond","value":"false","widget":"array","title":"Extract Second","description":"Extract Second","datatypes":["boolean"],"optionsArray":["true","false"],"required":false,"display":true,"editable":true,"disableRefresh":false},{"name":"extractWeekOfYear","value":"false","widget":"array","title":"Extract WeekOfYear","description":"Extract WeekOfYear","datatypes":["boolean"],"optionsArray":["true","false"],"required":false,"display":true,"editable":true,"disableRefresh":false}],"engine":"scala"},{"id":"8","name":"StringToDate","description":"This node converts a string column to date using the given date/time format","details":"","examples":"\u003ch2\u003eFormat Examples\u003c/h2\u003e\n\u003cbr\u003e\ndd-MM-yy : 31-01-12\u003cbr\u003e\ndd-MM-yyyy : 31-01-2012\u003cbr\u003e\nMM-dd-yyyy : 01-31-2012\u003cbr\u003e\nyyyy-MM-dd : 2012-01-31\u003cbr\u003e\nyyyy-MM-dd HH:mm:ss : 2012-01-31 23:59:59\u003cbr\u003e\nyyyy-MM-dd HH:mm:ss.SSS : 2012-01-31 23:59:59.999\u003cbr\u003e\nyyyy-MM-dd HH:mm:ss.SSSZ : 2012-01-31 23:59:59.999+0100\u003cbr\u003e\nEEEEE MMMMM yyyy HH:mm:ss.SSSZ : Saturday November 2012 10:45:42.720+0100\u003cbr\u003e\n\u003cbr\u003e\nOUTPUT COLUMN NAME: - If user inputs an existing column name, it overrides the column \u003cbr\u003e\n                      otherwise it will add a new column.\u003cbr\u003e","type":"transform","nodeClass":"fire.nodes.etl.NodeStringToDate","x":"427.413px","y":"178.656px","fields":[{"name":"storageLevel","value":"DEFAULT","widget":"array","title":"Output Storage Level","description":"Storage Level of the Output Datasets of this Node","optionsArray":["DEFAULT","NONE","DISK_ONLY","DISK_ONLY_2","MEMORY_ONLY","MEMORY_ONLY_2","MEMORY_ONLY_SER","MEMORY_ONLY_SER_2","MEMORY_AND_DISK","MEMORY_AND_DISK_2","MEMORY_AND_DISK_SER","MEMORY_AND_DISK_SER_2","OFF_HEAP"],"required":false,"display":true,"editable":true,"disableRefresh":false},{"name":"inputColName","value":"datetime","widget":"variable","title":"Input Column Name","description":"Input Column Name","datatypes":["string"],"required":false,"display":true,"editable":true,"disableRefresh":false},{"name":"inputColFormat","value":"dd/MM/yyyy HH:mm","widget":"textfield","title":"Input Column Format","description":"Input Column Format. eg: yyyy-MM-dd yyyy-MM-dd HH:mm:ss","required":false,"display":true,"editable":true,"disableRefresh":false},{"name":"outputColName","value":"datetime_dt","widget":"textfield","title":"Output Column Name","description":"Output Column Name","required":false,"display":true,"editable":true,"disableRefresh":false},{"name":"outputColType","value":"TIMESTAMP","widget":"array","title":"Output Column Type","description":"Output Column Type","optionsArray":["DATE","TIMESTAMP"],"required":false,"display":true,"editable":true,"disableRefresh":false}],"engine":"scala"}],"edges":[{"source":"1","target":"4","id":1},{"source":"5","target":"2","id":2},{"source":"6","target":"5","id":3},{"source":"4","target":"8","id":4},{"source":"8","target":"6","id":5}],"dataSetDetails":[],"engine":"scala"}